<!DOCTYPE html>
<html>
<head>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link href='https://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,600,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="index.css">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Herramienta de Marcos</title>
</head>
<body>
<div class="contenedor">

	<form onsubmit="mostrar_resultado(); return false">

  <h1><strong>¡Personaliza</strong> tu foto con Mamá!</h1>
   <div class="form-group file-area">
        <label for="images">Imagen <span>Tamaño recomendado: 600x600</span></label>
    <input type="file" name="images" id="images" required="required"  accept="image/*"/>
    <div class="file-dummy">
      <div class="success">Bien, tu imagen ha sido seleccionada. Continua.</div>
      <div class="default">Selecciona o arrastra una imagen.</div>
    </div>
  </div>
  
  <div class="form-group">
    <label for="title">Texto <span>Utiliza un texto para rellenar tu imagen</span></label>
    <input type="text" name="title" id="titulo" class="form-controll" required />
  </div>
  <div class="form-group">
    <label for="caption">Marcos<span>Selecciona un marco para decorar tu imagen</span></label>

<div class="opciones">
<input type="radio" name="marco" id="marco1" value="1" onclick="document.getElementById('design1').style.display='block'; document.getElementById('design2').style.display='none'; document.getElementById('design3').style.display='none';
document.querySelector('.card-text').style.left='50%';
document.querySelector('.card-text').style.top='20px';
document.querySelector('.card-text').style.color='white';
function myFunction() {
  if (x.matches) { // If media query matches
document.querySelector('.card-text').style.left='60%';
document.querySelector('.card-text').style.top='0px';
document.querySelector('.card-text').style.color='#004982';
  } 
}
var x = window.matchMedia('(max-width: 600px)');
myFunction();"

 required/>
<label for="marco1">
   <img src="img/marco1.png" />
</label>

<input type="radio" name="marco" id="marco2" value="2" onclick="document.getElementById('design1').style.display='none'; document.getElementById('design2').style.display='block'; document.getElementById('design3').style.display='none';
document.querySelector('.card-text').style.left='50%';
document.querySelector('.card-text').style.top='410px';
document.querySelector('.card-text').style.color='#004982';

function myFunction() {
  if (x.matches) { // If media query matches
document.querySelector('.card-text').style.left='60%';
document.querySelector('.card-text').style.top='300px';
document.querySelector('.card-text').style.color='#004982';
  } 
}
var x = window.matchMedia('(max-width: 600px)');
myFunction();"

 required/>
<label for="marco2">
  <img src="img/marco2.png" />
</label>

<input type="radio" name="marco" id="marco3" value="3" onclick="
document.getElementById('design1').style.display='none'; document.getElementById('design2').style.display='none'; 
document.getElementById('design3').style.display='block'; 
document.querySelector('.card-text').style.left='55%';
document.querySelector('.card-text').style.top='430px';
document.querySelector('.card-text').style.color='#004982';
function myFunction() {
  if (x.matches) { // If media query matches
document.querySelector('.card-text').style.left='70%';
document.querySelector('.card-text').style.top='320px';
document.querySelector('.card-text').style.color='#004982';
  } 
}
var x = window.matchMedia('(max-width: 600px)');
myFunction();"

required/>
<label for="marco3">
  <img src="img/marco3.png" />
</label>
</div>
  </div>

  <div class="form-group">
  <center>  <button type="submit" id="crear">Crear Diseño</button></center>
  </div>
</form>
</div>

<div class="overlay">
  <div class="overlay_inner">

  <div class="columna">
    <div class="resultado">
  <div class="card" id="mi_imagen">
    <h5 class="card-text" id="txt_resultado" ></h5>
  <center><img class="card-img-top" src="" id="img_resultado">
    <img class="card-img-top" src="img/marco1.png" id="design1">
    <img class="card-img-top" src="img/marco2.png" id="design2">
    <img class="card-img-top" src="img/marco3.png" id="design3">
</div>
</div>
 </div>

<div class="columna">
  <button id="descarga">Descargar Imagen</button>
  <button id="atras" onclick="location.reload();">Volver Atrás</button>
</div>
  </div>
</div>


 <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
 <script src="dom-to-image.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js" integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
 <script src="function.js"></script>

<script>
var node = document.getElementById('mi_imagen');
var btn = document.getElementById('descarga');
btn.onclick = function() {
  domtoimage.toBlob(document.getElementById('mi_imagen'))
    .then(function(blob)
     {
     window.saveAs(blob, 'mi_imagen.png');
   });
}
</script>

    <script>
      $(document).ready(function(){
        $("#titulo").on("input", function(){
          $("#txt_resultado").text($(this).val());
        });
      });
    </script>
</body>
</html>